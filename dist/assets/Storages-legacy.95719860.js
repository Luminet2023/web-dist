System.register(["./index-legacy.ebd850b2.js","./useTitle-legacy.571980d5.js","./DeletePopover-legacy.1018a543.js"],(function(e){"use strict";var r,t,n,a,l,g,s,i,d,c,o,u,h,b,m,$,p,f,w,v,k,_,y,C,x,S,T,j,B,X,q,D,H,L,G,I,M,O,P,V,W,z,A,E;return{setters:[e=>{r=e.a,t=e.h,n=e.X,a=e.ag,l=e.aq,g=e.b2,s=e.cl,i=e.aL,d=e.a7,c=e.a4,o=e.dg,u=e.dd,h=e.b,b=e.aT,m=e.b6,$=e.C,p=e.aV,f=e.b7,w=e.n,v=e.m,k=e.k,_=e.cg,y=e.S,C=e.bm,x=e.bn,S=e.bo,T=e.bp,j=e.bq,B=e.br,X=e.bs,q=e.G,D=e.bt,H=e.bu,L=e.bv,G=e.bw,I=e.$,M=e.a0,O=e.d1,P=e.db,V=e.dc,W=e.de,z=e.df},e=>{A=e.b},e=>{E=e.D}],execute:function(){function F(e){const n=r(),{to:a}=h(),[l,g]=b((()=>m.post(`/admin/storage/delete?id=${e.storage.id}`))),[s,i]=b((()=>m.post(`/admin/storage/${e.storage.disabled?"enable":"disable"}?id=${e.storage.id}`)));return[t($,{onClick:()=>{a(`//manage/storages/edit/${e.storage.id}`)},get children(){return n("global.edit")}}),t($,{get loading(){return s()},get colorScheme(){return e.storage.disabled?"success":"warning"},onClick:async()=>{const r=await i();p(r,(()=>{e.refresh()}))},get children(){return n("global."+(e.storage.disabled?"enable":"disable"))}}),t(E,{get name(){return e.storage.mount_path},get loading(){return l()},onClick:async()=>{const r=await g();f(r,(()=>{w.success(n("global.delete_success")),e.refresh()}))}})]}function J(e){const o=r();return t(c,{w:"$full",spacing:"$2",rounded:"$lg",border:"1px solid $neutral7",get background(){return n("$neutral2","$neutral3")()},p:"$3",get _hover(){return{border:`1px solid ${a()}`}},get children(){return[t(l,{spacing:"$2",get children(){return[t(g,{fontWeight:"$medium",css:{wordBreak:"break-all"},get children(){return e.storage.mount_path}}),t(s,{colorScheme:"info",get children(){return o(`drivers.drivers.${e.storage.driver}`)}})]}}),t(l,{get children(){return[t(g,{get children(){return[i((()=>o("storages.common.status"))),":Â "]}}),t(d,{css:{wordBreak:"break-all"},overflowX:"auto",get innerHTML(){return e.storage.status}})]}}),t(g,{css:{wordBreak:"break-all"},get children(){return e.storage.remark}}),t(l,{spacing:"$2",get children(){return t(F,e)}})]}})}function K(e){const n=r();return t(u,{get children(){return[t(o,{get children(){return e.storage.mount_path}}),t(o,{get children(){return n(`drivers.drivers.${e.storage.driver}`)}}),t(o,{get children(){return e.storage.order}}),t(o,{get children(){return e.storage.status}}),t(o,{get children(){return e.storage.remark}}),t(o,{get children(){return t(l,{spacing:"$2",get children(){return t(F,e)}})}})]}})}e("default",(()=>{const e=r();A("manage.sidemenu.storages");const{to:n}=h(),[a,g]=b((()=>m.get("/admin/storage/list"))),[s,i]=v([]),o=async()=>{const e=await g();f(e,(e=>i(e.content)))},[p,E]=v([]),[F,N]=v([]);(async()=>{const e=await m.get("/admin/driver/names");f(e,(e=>E(e)))})(),o();const Q=async()=>{const r=await m.post("/admin/storage/load_all");f(r,(()=>{w.success(e("storages.other.start_load_success"))}))},R=k((()=>s().filter((e=>0===F().length||F().includes(e.driver))))),[U,Y]=_("storages-layout","grid");return t(c,{spacing:"$3",alignItems:"start",w:"$full",get children(){return[t(l,{spacing:"$2",gap:"$2",w:"$full",wrap:{"@initial":"wrap","@md":"unset"},get children(){return[t($,{colorScheme:"accent",get loading(){return a()},onClick:o,get children(){return e("global.refresh")}}),t($,{onClick:()=>{n("//manage/storages/add")},get children(){return e("global.add")}}),t($,{colorScheme:"warning",get loading(){return a()},onClick:Q,get children(){return e("storages.other.load_all")}}),t(y,{get when(){return p().length>0},get children(){return t(C,{multiple:!0,get value(){return F()},onChange:N,get children(){return[t(x,{get children(){return[t(S,{get children(){return e("storages.other.filter_by_driver")}}),t(T,{}),t(j,{})]}}),t(B,{get children(){return t(X,{get children(){return t(q,{get each(){return p()},children:r=>t(D,{value:r,get children(){return[t(H,{get children(){return e(`drivers.drivers.${r}`)}}),t(L,{})]}})})}})}})]}})}}),t(G,{get checked(){return"table"===U()},onChange:e=>{Y(e.currentTarget.checked?"table":"grid")},get children(){return e("storages.other.table_layout")}})]}}),t(I,{get children(){return[t(M,{get when(){return"grid"===U()},get children(){return t(O,{w:"$full",gap:"$2_5",templateColumns:{"@initial":"1fr","@lg":"repeat(auto-fill, minmax(324px, 1fr))"},get children(){return t(q,{get each(){return R()},children:e=>t(J,{storage:e,refresh:o})})}})}}),t(M,{get when(){return"table"===U()},get children(){return t(d,{w:"$full",overflowX:"auto",get children(){return t(P,{highlightOnHover:!0,dense:!0,get children(){return[t(V,{get children(){return t(u,{get children(){return[t(q,{each:["mount_path","driver","order","status","remark"],children:r=>t(W,{get children(){return e(`storages.common.${r}`)}})}),t(W,{get children(){return e("global.operations")}})]}})}}),t(z,{get children(){return t(q,{get each(){return R()},children:e=>t(K,{storage:e,refresh:o})})}})]}})}})}})]}})]}})}))}}}));
