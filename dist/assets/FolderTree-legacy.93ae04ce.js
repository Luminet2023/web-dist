System.register(["./index-legacy.32b0ab0d.js","./index-legacy.5f999950.js"],(function(e){"use strict";var r,n,t,o,l,a,u,g,c,h,i,d,s,p,f,b,C,m,w,y,$,k,v,x,F,O,_,I,S,z,H,P,R,B,E,L,M,T;return{setters:[e=>{r=e.aF,n=e.a,t=e.h,o=e.I,l=e.S,a=e.C,u=e.aq,g=e.M,c=e.y,h=e.ba,i=e.z,d=e.A,s=e.B,p=e.D,f=e.m,b=e.a7,C=e.bG,m=e.bH,w=e.aT,y=e.bI,$=e._,k=e.bJ,v=e.x,x=e.r,F=e.bK,O=e.ag,_=e.aB,I=e.b2,S=e.L,z=e.aL,H=e.p,P=e.a4,R=e.G,B=e.d,E=e.bL,L=e.b7},e=>{M=e.f,T=e.g}],execute:function(){const j=E(),G=e("F",(e=>{const[r,n]=f("/");return e.handle?.({setPath:n}),t(b,{class:"folder-tree-box",w:"$full",overflowX:"auto",get children(){return t(j.Provider,{get value(){return{value:r,onChange:r=>{n(r),e.onChange(r)},autoOpen:e.autoOpen??!1,forceRoot:e.forceRoot??!1,showEmptyIcon:e.showEmptyIcon??!1,showHiddenFolder:e.showHiddenFolder??!0}},get children(){return t(q,{path:"/"})}})}})})),q=e=>{const{isHidePath:n}=C(),[o,a]=f(),{value:g,onChange:c,forceRoot:h,autoOpen:i,showEmptyIcon:d,showHiddenFolder:s}=m(j),[p,E]=w((()=>y(e.path,$(),h)));let G=!1;const A=async()=>{if(o()?.length)return;const e=await E();L(e,(e=>{G=!0,a(e)}),(()=>{D()&&J()}))},{isOpen:D,onToggle:J}=r(),K=()=>g()===e.path,V=k(e.path);return v(x(g,(async e=>{i&&V(e)&&(D()||J(),G||A())}))),t(l,{get when(){return s||!(n(e.path)&&!V(g()))},get children(){return t(b,{get children(){return[t(u,{spacing:"$2",get children(){return[t(l,{get when(){return!p()},get fallback(){return t(F,{size:"sm",get color(){return O()}})},get children(){return t(l,{get when(){return!Boolean(d&&void 0!==o()&&!o()?.length)},get fallback(){return t(_,{get color(){return O()},as:M})},get children(){return t(_,{get color(){return O()},as:T,get transform(){return D()?"rotate(90deg)":"none"},transition:"transform 0.2s",cursor:"pointer",onClick:()=>{J(),D()&&A()}})}})}}),t(I,{css:{whiteSpace:"nowrap"},fontSize:"$md",cursor:"pointer",px:"$1",rounded:"$md",get bgColor(){return K()?"$info8":"transparent"},get _hover(){return{bgColor:K()?"$info8":S()}},onClick:()=>{c(e.path)},get children(){return z((()=>"/"===e.path))()?"root":H(e.path)}})]}}),t(l,{get when(){return D()},get children(){return t(P,{mt:"$1",pl:"$4",alignItems:"start",spacing:"$1",get children(){return t(R,{get each(){return o()},children:r=>t(q,{get path(){return B(e.path,r.name)}})})}})}})]}})}})};e("M",(e=>{const r=n(),[o,l]=f(e.defaultValue??"/"),[u,h]=f();return v((()=>{e.opened&&u()?.setPath(o())})),t(p,{size:"xl",blockScrollOnMount:!1,get opened(){return e.opened},get onClose(){return e.onClose},get children(){return[t(g,{}),t(c,{get children(){return[t(i,{get children(){return r("home.toolbar.choose_dst_folder")}}),t(d,{get children(){return t(G,{onChange:l,handle:e=>h(e),autoOpen:!0})}}),t(s,{display:"flex",gap:"$2",get children(){return[t(a,{get onClick(){return e.onClose},colorScheme:"neutral",get children(){return r("global.cancel")}}),t(a,{get loading(){return e.loading},onClick:()=>e.onSubmit?.(o()),get children(){return r("global.ok")}})]}})]}})]}})})),e("a",(e=>{const{isOpen:f,onOpen:b,onClose:C}=r(),m=n();return[t(u,{w:"$full",spacing:"$2",get children(){return[t(o,{get id(){return e.id},get value(){return e.value},onInput:r=>e.onChange(r.currentTarget.value),get readOnly(){return e.onlyFolder},get onClick(){return e.onlyFolder?b:()=>{}},get placeholder(){return m("global."+(e.onlyFolder?"choose_folder":"choose_or_input_path"))}}),t(l,{get when(){return!e.onlyFolder},get children(){return t(a,{onClick:b,get children(){return m("global.choose")}})}})]}}),t(p,{size:"xl",get opened(){return f()},onClose:C,get children(){return[t(g,{}),t(c,{get children(){return[t(h,{}),t(i,{get children(){return m("global.choose_folder")}}),t(d,{get children(){return t(G,{forceRoot:!0,get onChange(){return e.onChange}})}}),t(s,{get children(){return t(a,{onClick:C,get children(){return m("global.confirm")}})}})]}})]}})]}))}}}));
